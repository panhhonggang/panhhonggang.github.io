<!DOCTYPE html>
<html lang="zh-cn">
	<head>
		<meta charset="utf-8">
		<meta http-equiv="X-UA-Compatible" content="IE=edge">
		<meta name="viewport" content="width=device-width, initial-scale=1">
		<meta name="keywords" content="潘宏钢,PHP,MySQL,panhonggang,技术博客" />
		<meta name="description" content="PHP集成开发工程师" />
		<title>潘宏钢的博客</title>
		<link href="./css/bootstrap.min.css" rel="stylesheet">
		<style type="text/css">
			#title{width:100%; height:200px; background:pink;}
			#ss{font-size:42px; top:60px; position:absolute; left:80px;}
			.form-group{position:absolute; left:700px; top:80px;}
			.container{width:100%;}
			.navbar-nav{margin-left:80px;}
			.navbar-nav li{margin-left:50px;}
			.column{margin-left:50px; border:1px solid #ddd;}

		</style>
	</head>
	<body>
		<div id="title">
			<span id="ss">潘宏钢的博客</span>
			<form class="navbar-form navbar-left" role="search">
				<div class="form-group">
					<input class="form-control" type="text" />
					<button type="submit" class="btn btn-default">搜索</button>
				</div> 
			</form>
		</div>
		<div class="container">
			<div class="row clearfix">
					<nav class="navbar navbar-default" role="navigation">
						<div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1" >
							<ul class="nav navbar-nav">
								<li class="active">
									 <a href="./index.html">首页</a>
								</li>
								<li>
									 <a href="#">PHP</a>
								</li>
								<li>
									 <a href="#">MySQL</a>
								</li>
								<li>
									 <a href="#">微信开发</a>
								</li>
								<li>
									 <a href="#">git</a>
								</li>
								<li>
									 <a href="#">工具</a>
								</li>
								<li>
									 <a href="#">杂谈</a>
								</li>
							</ul>
						</div>
					</nav>
			</div>
			<div class="row clearfix">
				<div class="col-md-7 column">
					<h2>
						GD库函数使用
					</h2>
					&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span><font size="4">作者：潘宏钢</font></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
					<span><font size="4">时间：2016年10月28日</font></span>
					<br>
					<br>
						<div class="post-body"><p>GetImageSize</p><p>作用：取得图片的大小[即长与宽]</p><p>用法：array GetImageSize(string filename, array [imageinfo]);</p><p>ImageArc</p><p>作用：画弧线&nbsp;</p><p>用法：int ImageArc(int im, int cx, int cy, int w, int h, int s, int e, int col);</p><p>ImageChar</p><p>作用：写出横向字符&nbsp;</p><p>用法：int ImageChar(int im, int font, int x, int y, string c, int col);</p><p>ImageCharUp</p><p>作用：写出竖式字符</p><p>用法：int ImageCharup(int im, int font, int x, int y, string c, int col);</p><p>ImageColorAllocate</p><p>作用：匹配颜色</p><p>用法：int ImageColorAllocate(int im, int red, int green, int blue);</p><p style="white-space: normal;">ImageColorTransparent</p><p style="white-space: normal;">作用：指定透明背景色</p><p style="white-space: normal;">用法：int ImageColorTransparent(int im, int [col]);</p><p>ImageCopyResized</p><p>作用：复制新图并调整大小&nbsp;</p><p>用法：int ImageCopyResized(int dst_im, int src_im, int dstX, int dstY, int srcX, int srcY, int dstW, int dstH, int srcW, int srcH);</p><p>ImageCreate</p><p>作用：建立新图</p><p>用法：int ImageCreate(int x_size, int y_size);</p><p>ImageDashedLine</p><p>作用：绘虚线&nbsp;</p><p>用法：int ImageDashedLine(int im, int x1, int y1, int x2, int y2, int col);</p><p>ImageDestroy&nbsp;</p><p>作用：结束图形&nbsp;</p><p>用法解释：int ImageDestroy(int im);</p><p>ImageFill</p><p>作用：图形着色</p><p>用法：int ImageFill(int im, int x, int y, int col);</p><p>ImageFilledPolygon</p><p>作用：多边形区域着色</p><p>用法：int ImageFilledPolygon(int im, array points, int num_points, int col);</p><p>ImageFilledRectangle</p><p>作用：矩形区域着色&nbsp;</p><p>用法：int ImageFilledRectangle(int im, int x1, int y1, int x2, int y2, int col);</p><p>ImageFillToBorder</p><p>作用：指定颜色区域内着色</p><p>用法：int ImageFillToBorder(int im, int x, int y, int border, int col);</p><p>ImageFontHeight</p><p>作用：取得字型的高度</p><p>用法：int ImageFontHeight(int font);</p><p>ImageFontWidth</p><p>作用：取得字型的宽度</p><p>用法：int ImageFontWidth(int font);</p><p>ImageFontWidth</p><p>作用：取得字型的宽度</p><p>用法：int ImageFontWidth(int font);</p><p>ImageLine</p><p>作用：绘实线</p><p>用法：int ImageLine(int im, int x1, int y1, int x2, int y2, int col);</p><p>ImageLoadFont</p><p>作用：载入点阵字型</p><p>用法：int ImageLoadFont(string file);</p><p>ImagePolygon</p><p>作用：绘多边形</p><p>用法：int ImagePolygon(int im, array points, int num_points, int col);</p><p>ImageRectangle</p><p>作用：绘矩形</p><p>用法：int ImageRectangle(int im, int x1, int y1, int x2, int y2, int col);</p><p>ImageSetPixel</p><p>作用：绘点</p><p>用法：int ImageSetPixel(int im, int x, int y, int col);&nbsp;</p><p>ImageString&nbsp;</p><p>作用：绘横式字符串</p><p>用法：int ImageString(int im, int font, int x, int y, string s, int col);</p><p>ImageStringUp</p><p>作用：绘直式字符串</p><p>用法：int ImageStringUp(int im, int font, int x, int y, string s, int col);</p><p>ImageSX</p><p>作用：取得图片的宽度&nbsp;</p><p>用法：int ImageSX(int im);</p><p>ImageSY</p><p>作用：取得图片的高度</p><p>用法：int ImageSY(int im);</p><p>ImageTTFBBox</p><p>作用：计算 TTF 文字所占区域</p><p>用法：array ImageTTFBBox(int size, int angle, string fontfile, string text);</p><p>ImageTTFText</p><p>作用：写 TTF 文字到图中</p><p>用法：array ImageTTFText(int im, int size, int angle, int x, int y, int col, string fontfile, string text);&nbsp;</p><p>ImageColorAt&nbsp;</p><p>作用：取得图中指定点颜色的索引值</p><p>用法：int ImageColorAt(int im, int x, int y);</p><p>ImageColorClosest</p><p>作用：计算色表中与指定颜色最接近者</p><p>用法：int ImageColorClosest(int im, int red, int green, int blue);</p><p>ImageColorExact</p><p>作用：计算色表上指定颜色索引值</p><p>用法：int ImageColorExact(int im, int red, int green, int blue);</p><p>ImageColorResolve</p><p>作用：计算色表上指定或最接近颜色的索引值</p><p>用法：int ImageColorResolve(int im, int red, int green, int blue);</p><p>ImageColorSet</p><p>作用：设定色表上指定索引的颜色</p><p>用法：boolean ImageColorSet(int im, int index, int red, int green, int blue);</p><p>ImageColorsForIndex&nbsp;</p><p>作用：取得色表上指定索引的颜色</p><p>用法：array ImageColorsForIndex(int im, int index);</p><p>ImageColorsTotal</p><p>作用：计算图的颜色数</p><p>用法：int ImageColorsTotal(int im);&nbsp;</p><p>ImagePSLoadFont&nbsp;</p><p>作用：载入 PostScript 字型</p><p>用法：int ImagePSLoadFont(string filename);</p><p>ImagePSFreeFont</p><p>作用：卸下 PostScript 字型</p><p>用法：void ImagePSFreeFont(int fontindex);</p><p>ImagePSEncodeFont</p><p>作用：PostScript 字型转成向量字</p><p>用法：int ImagePSEncodeFont(string encodingfile);</p><p>ImagePSText</p><p>作用：写 PostScript 文字到图中</p><p>用法：array ImagePSText(int image, string text, int font, int size, int foreground, int background, int x, int y, int space, int tightness, float angle, int antialias_steps);</p><p>ImagePSBBox</p><p>作用：计算 PostScript 文字所占区域</p><p>用法： array ImagePSBBox(string text, int font, int size, int space, int width, float angle);</p><p>ImageCreateFromPNG</p><p>作用：取出 PNG 图型</p><p>用法：int ImageCreateFromPng(string filename);</p><p>ImagePNG</p><p>作用：建立 PNG 图型</p><p>用法：int ImagePng(int im, string [filename]);</p><p>ImageCreateFromGIF</p><p>作用：取出 GIF 图型</p><p>用法：int ImageCreateFromGif(string filename);</p><p>ImageGIF</p><p>作用：建立 GIF 图型&nbsp;</p><p>用法：int ImageGif(int im, string [filename]);</p><p><br/></p><p>GD使用一般步骤：(PHP)</p>
						<pre class="brush:php;toolbar:false">&lt;?php
if(!isset($_SESSION)){&nbsp;//判断session是否开启
	session_start();&nbsp;//开启就session
}&nbsp;
$width=70;&nbsp;//布画宽度
$height=25;&nbsp;//布画高度
$length=4;//验证码长度
$code=getcode($length);&nbsp;//获取随机字符串
$_SESSION[&#39;verfyCode&#39;]&nbsp;=&nbsp;$code;&nbsp;

$img=imagecreate($width,$height);
$bgcolor=imagecolorallocate($img,240,240,240);
$rectangelcolor=imagecolorallocate($img,150,150,150);
imagerectangle($img,1,1,$width-1,$height-1,$rectangelcolor);//画边框

for($i=0;$i&lt;$length;$i++){//循环写字
	$codecolor=imagecolorallocate($img,mt_rand(50,200),mt_rand(50,128),mt_rand(50,200));
	$angle=rand(-20,20);
	$charx=$i*15+8;
	$chary=($height+14)/2+rand(-1,1);
	imagettftext($img,15,$angle,$charx,$chary,$codecolor,&#39;./ariblk.ttf&#39;,$code[$i]);
}

for($i=0;$i&lt;20;$i++){//循环画线
	$linecolor=imagecolorallocate($img,mt_rand(0,250),mt_rand(0,250),mt_rand(0,250));
	$linex=mt_rand(1,$width-1);
	$liney=mt_rand(1,$height-1);
	imageline($img,$linex,$liney,$linex+mt_rand(0,4)-2,$liney+mt_rand(0,4)-2,$linecolor);
}

for($i=0;$i&lt;100;$i++){//循环画点
	$pointcolor=imagecolorallocate($img,mt_rand(0,250),mt_rand(0,250),mt_rand(0,250));
	imagesetpixel($img,mt_rand(1,$width-1),mt_rand(1,$height-1),$pointcolor);
}

function&nbsp;getcode($length){//生成php随机数&nbsp;
	$pattern&nbsp;=&nbsp;&#39;1234567890ABCDEFGHIJKLOMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz&nbsp;&#39;;//字符池&nbsp;
	for($i=0;$i&lt;$length;$i++)&nbsp;{&nbsp;
		$key&nbsp;.=&nbsp;$pattern{mt_rand(0,35)};&nbsp;
	}&nbsp;
	return&nbsp;$key;&nbsp;
}
ob_clean();
header(&#39;Content-type:image/png&#39;);&nbsp;
imagepng($img);
						</pre>
						<p>通常按需增加某些功能。结合session就能做登录验证用。</p>
					</div>
					<br>
					<br>
				</div>

				<div class="col-md-4 column">
					<h3>博文链接</h3>
					<ul>
						<li>
							<a href="./gd.html" target="_blank">GD库函数使用</a>
						</li>
					</ul>
				</div>
			</div>
		</div>
    <script src="http://cdn.bootcss.com/jquery/1.11.1/jquery.min.js"></script>
    <script src="./js/bootstrap.min.js"></script>
	</body>
</html>
